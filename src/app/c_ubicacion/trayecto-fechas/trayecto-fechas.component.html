
<div   style="height: 5%; top: 0%;" *ngIf="!isSearch">
    <mat-card style="height: 5%;top: 0%">
        <mat-card-content>
      <form   [formGroup]="formSearch" >
        <table><tr>
          <td>
        <mat-form-field>
          <input matInput [matDatepicker]="picker1" placeholder="Fecha inicio" readonly type="fechaInicio" formControlName="fechaInicio"  name="fechaInicio" class="form-control" id="fechaInicio">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
      </td>
      <td>
         <mat-form-field>
          <input matInput [matDatepicker]="picker" placeholder="Fecha Fin" type="fechaFin" readonly formControlName="fechaFin"  name="fechaFin" class="form-control" id="fechaFin" (blur)="compareTwoDates()">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </td>
      <td> &nbsp;
          <button mat-icon-button (click)="onSearch()">
              <span matTooltip="Buscar">
                <mat-icon>youtube_searched_for</mat-icon>
              </span>
            </button>  
      </td>
      </tr></table>
          </form>
         </mat-card-content>
  </mat-card>
</div>
<div *ngIf="error.isError" class="alert alert-danger">
    {{ error.errorMessage }}
 </div>
<div class="mat-elevation-z8" *ngIf="dataSource.data.length > 0 else noData" >

  <table  mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8" style="width: 100%;" > 
  
  <!--- Note that these columns can be defined in any order.
        The actual rendered columns are set as a property on the row definition" -->
  
  <!-- idObjeto -->
  
  <!-- Nombre -->
  <ng-container matColumnDef="fecha">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha </th>
    <td mat-cell *matCellDef="let element"> {{convertDate(element.fecha)}} </td>
  </ng-container>
  
  <!-- descripcion  -->
  <ng-container matColumnDef="descripcion">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Descripcion </th>
    <td mat-cell *matCellDef="let element"> {{element.descripcion}} </td>
  </ng-container>
  
     <!-- Estatus -->
     <ng-container matColumnDef="pais">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Pais </th>
        <td mat-cell *matCellDef="let element"> {{element.pais}} </td>
      </ng-container>
  
           <!-- Estatus -->
     <ng-container matColumnDef="latitud">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Latitud</th>
        <td mat-cell *matCellDef="let element"> {{element.latitud}} </td>
      </ng-container>
  
           <!-- Estatus -->
     <ng-container matColumnDef="longitud">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Longitud </th>
        <td mat-cell *matCellDef="let element"> {{element.longitud}} </td>
      </ng-container>
  
                 <!-- Estatus -->
     <ng-container matColumnDef="estatus">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Estatus</th>
        <td mat-cell *matCellDef="let element"> {{element.estatus}} </td>
      </ng-container>

    <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef> <br>Acciones</mat-header-cell>
        <mat-cell *matCellDef="let row" style="white-space: nowrap">  
            <button mat-icon-button (click)="onActivate()" >
              <span matTooltip="Nueva Busqueda">
                <mat-icon>find_replace</mat-icon>
              </span>
            </button>
        </mat-cell>
      </ng-container>
  <tr style="height: 30px;" mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr style="height: 20px;" mat-row *matRowDef="let row; columns: displayedColumns;"></tr>  
  </table>
  <mat-paginator [pageSizeOptions]="[1]" showFirstLastButtons></mat-paginator>
<div *ngIf="isSearch" class="container">
  <agm-map [latitude]="ConvertString(latitude)" [longitude]="ConvertString(longitude)" [scrollwheel]="false" [zoom]="zoom">
    <ng-container>
        <agm-circle [latitude]="ConvertString(rows[0].latitud)" [longitude]="ConvertString(rows[0].longitud)" 
        [fillOpacity]="0.5" [radius]="100" [fillColor]="red" ></agm-circle>
        <agm-circle [latitude]="ConvertString(rows[rows.length - 1].latitud)" [longitude]="ConvertString(rows[rows.length - 1].longitud)" 
        [fillOpacity]="0.5" [radius]="100" [fillColor]="blue"></agm-circle>
      <agm-polyline *ngFor="let point of rows;let i = index;" [strokeColor]="point.speed < 50 ? '#2196f3': 'red'">
         <agm-polyline-point [latitude]="ConvertString(point.latitud)" [longitude]="ConvertString(point.longitud)">
         </agm-polyline-point>
         <ng-container *ngIf="rows[i+1]">
           <agm-polyline-point [latitude]="ConvertString(rows[i+1].latitud)" [longitude]="ConvertString(rows[i+1].longitud)">
           </agm-polyline-point>
         </ng-container>
     </agm-polyline>
   </ng-container>
 </agm-map>
</div>

